<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>US Map with D3 and TopoJSON</title>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="https://d3js.org/topojson.v3.min.js"></script>
</head>

<body>
  <svg width="960" height="600"></svg>
  <script>
    const width = 960, height = 600;
    const svg = d3.select("svg");

    // Define a projection for the map
    const projection = d3.geoAlbersUsa().scale(1000).translate([width / 2, height / 2]);
    const path = d3.geoPath().projection(projection);

    // Load the TopoJSON data
    d3.json("cleaned_us_state_boundaries.json").then(data => {
      const counties = topojson.feature(data, data.objects.counties);

      svg.selectAll("path")
        .data(counties.features)
        .join("path")
        .attr("d", path)
        .attr("fill", "#69b3a2")
        .attr("stroke", "#ffffff")
        .attr("stroke-width", 0.5)
        .on("mouseover", function (event, d) {
          d3.select(this).attr("fill", "#2d7a46");
        })
        .on("mouseout", function (event, d) {
          d3.select(this).attr("fill", "#69b3a2");
        });
    }).catch(error => console.error("Error loading data:", error));
  </script>
</body>

</html>